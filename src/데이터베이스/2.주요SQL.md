# SQL 주요 문법 정리

## 데이터베이스 기본 개념

- **데이터베이스(DB)**: 데이터/자료들의 집합/모임.
- **관계형 DB**: 자료들 간의 종속되는 관계를 표현할 수 있는 DB.
- **테이블**: 행과 열로 이루어진 데이터 형식 (표).

## SQL (Structured Query Language)

### 주의할 점
1. SQL은 대소문자를 구분하지 않습니다.
2. SQL 명령어 문장 끝에는 세미콜론(`;`)으로 마무리합니다.

---

### `[0] 메타데이터 관리어`
#### 1. `show`
- `show databases;`: DB 서버 내 전체 DB 목록을 조회합니다.
- `show variables like 'datadir';`: DB 서버 내 로컬 경로를 조회합니다.
- `show tables;`: *활성화* 중인 DB 내 모든 테이블을 조회합니다.

#### 2. `use`
- `use DB명;`: DB 서버 내에서 지정한 DB를 활성화(사용)합니다.

---

### `[1] DB 정의어 (DDL - Data Definition Language)`
#### 1. `create`
- **DB 생성**: `create database DB명;`
- **테이블 생성**:
  ```sql
  create table 테이블명 (
      속성명1 타입 제약조건,
      속성명2 타입 제약조건
  );
  ```

#### 2. `drop`
- `drop database DB명;`: 지정한 DB를 삭제합니다.
- `drop database if exists DB명;`: 만약 지정한 DB가 존재하면 삭제합니다.
- `drop table 테이블명;`: 지정한 테이블을 삭제합니다.
- `drop table if exists 테이블명;`: 만약 지정한 테이블이 존재하면 삭제합니다.

---

### `[2] DB 조작어 (DML - Data Manipulation Language)`
> **참고**: MySQL Workbench에서는 기본적으로 `safe mode`가 활성화되어 있어 `UPDATE` 및 `DELETE`가 제한될 수 있습니다.
> - `safe mode` 해제: `set SQL_SAFE_UPDATES = 0;`
> - `safe mode` 설정: `set SQL_SAFE_UPDATES = 1;`

#### 1. `INSERT` (레코드 추가)
- **특정 속성에 값 추가**:
  ```sql
  insert into 테이블명 (속성명1, 속성명2) values (값1, 값2);
  ```
- **모든 속성에 값 추가** (속성명 생략 시, 테이블 정의 순서대로 값 입력):
  ```sql
  insert into 테이블명 values (값1, 값2);
  ```
- **여러 레코드 한 번에 추가**:
  ```sql
  insert into 테이블명 values (값1, 값2), (값1, 값2), (값1, 값2);
  ```

#### 2. `SELECT` (레코드 조회)
- **전체 속성 조회**: `select * from 테이블명;`
- **특정 속성 조회**: `select 속성명1, 속성명2 from 테이블명;`
- **조건에 따른 조회**: `select * from 테이블명 where [조건절];`

#### 3. `UPDATE` (레코드 수정)
- **전체 레코드의 속성값 수정**: `update 테이블명 set 속성명 = 새로운값;`
- **조건에 따른 레코드의 속성값 수정**: `update 테이블명 set 속성명 = 새로운값 where [조건절];`
- **다수 속성값 동시 수정**: `update 테이블명 set 속성명1 = 새로운값1, 속성명2 = 새로운값2 where [조건절];`

#### 4. `DELETE` (레코드 삭제)
- **전체 레코드 삭제**: `delete from 테이블명;`
- **조건에 따른 레코드 삭제**: `delete from 테이블명 where [조건절];`

---

## 데이터 타입

| 종류 | 타입 | 설명 |
| --- | --- | --- |
| **정수** | `tinyint` | 1바이트 (-128 ~ 127) |
| | `smallint` | 2바이트 (±3만) |
| | `mediumint`| 3바이트 (±800만) |
| | `int` | 4바이트 (±21억) |
| | `bigint` | 8바이트 (±21억 이상) |
| | `unsigned` | 부호 없음 (양수 범위 2배 증가) |
| **실수** | `float` | 4바이트 소수점 |
| | `double` | 8바이트 소수점 |
| | `decimal` | 문자 타입의 소수점 (오차 없음) |
| **날짜/시간**| `date` | 날짜 (YYYY-MM-DD) |
| | `time` | 시간 (HH:MI:SS) |
| | `datetime` | 날짜와 시간 |
| **문자** | `char(길이)` | 고정 길이 문자열 (최대 255) |
| | `varchar(길이)`| 가변 길이 문자열 (최대 255) |
| | `text` | 최대 6만 글자 |
| | `longtext` | 최대 42억 글자 (4GB) |
| **논리** | `bool` | `true` 또는 `false` (내부적으로 `tinyint`) |

---

## 제약 조건

- `not null`: `null` 값을 허용하지 않습니다.
- `unique`: 중복값을 허용하지 않습니다.
- `default 기본값`: 값 생략 시 지정된 기본값으로 초기화합니다. (예: `default 0`, `default now()`)
- `auto_increment`: 레코드 추가 시 자동으로 번호를 1씩 증가시킵니다. (`primary key`와 함께 사용)
- `primary key`: 기본 키(PK). 레코드를 식별하는 고유한 값입니다. (`not null`과 `unique` 속성을 포함)
  - 선언: `constraint primary key(필드명)`
- `foreign key`: 외래 키(FK). 다른 테이블의 `primary key`를 참조합니다.
  - 선언: `constraint foreign key(FK필드명) references 참조테이블(PK필드명)`

---

## 주요 키워드 및 연산자

### 키워드
- **별칭 (`as`)**: `select 속성명 as 별칭 from 테이블명;` (`as`는 생략 가능)
- **중복 제거 (`distinct`)**: `select distinct 속성명 from 테이블명;`

### 연산자
- **산술**: `+`, `-`, `*`, `/`, `div`(몫), `mod`(나머지)
- **비교**: `>`, `<`, `>=`, `<=`, `=`, `!=`
- **논리**: `and`, `or`, `not`
- **범위 (`between`)**: `where 속성명 between 시작값 and 끝값`
- **포함 (`in`)**: `where 속성명 in (값1, 값2)`
- **NULL**: `where 속성명 is null`, `where 속성명 is not null`
- **문자 패턴 (`like`)**:
  - `%`: 모든 문자 대응 (글자 수 제한 없음) - `like '김%'`
  - `_`: 한 글자 대응 - `like '김_'`

---

## 데이터 정렬 및 제한

### 정렬 (`order by`)
- **오름차순**: `order by 속성명 asc` (기본값)
- **내림차순**: `order by 속성명 desc`
- **다중 정렬**: `order by 속성명1 asc, 속성명2 desc`

### 조회 결과 제한 (`limit`)
- `limit 레코드수`: 지정된 수만큼의 레코드만 조회합니다.
- `limit 시작인덱스, 개수`: 페이징 처리에 주로 사용됩니다.
  - 1페이지: `limit 0, 10`
  - 2페이지: `limit 10, 10`

---

## SQL 키워드 작성 순서
```sql
select    -- (3)
from      -- (1)
where     -- (2)
order by  -- (4)
limit     -- (5)
```
